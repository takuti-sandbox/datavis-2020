{"version":3,"file":"bundle.js","sources":["useData.js","AxisBottom.js","AxisLeft.js","Marks.js","ColorLegend.js","index.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { csv } from 'd3';\n\nconst csvUrl =\n  'https://gist.githubusercontent.com/curran/a08a1080b88344b0c8a7/raw/0e7a9b0a5d22642a06d3d5b9bcbad9890c8ee534/iris.csv';\n\nexport const useData = () => {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    const row = d => {\n      d.sepal_length = +d.sepal_lengh;\n      d.sepal_width = +d.sepal_width;\n      d.petal_length = +d.petal_length;\n      d.petal_width = +d.petal_width;\n      return d;\n    };\n    csv(csvUrl, row).then(setData);\n  }, []);\n\n  return data;\n};\n","export const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickOffset = 3,\n}) =>\n  xScale.ticks().map((tickValue) => (\n    <g\n      className=\"tick\"\n      key={tickValue}\n      transform={`translate(${xScale(tickValue)},0)`}\n    >\n      <line y2={innerHeight} />\n      <text\n        style={{ textAnchor: 'middle' }}\n        dy=\".71em\"\n        y={innerHeight + tickOffset}\n      >\n        {tickValue}\n      </text>\n    </g>\n  ));\n","export const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickOffset = 3,\n}) =>\n  yScale.ticks().map((tickValue) => (\n    <g\n      className=\"tick\"\n      transform={`translate(0,${yScale(tickValue)})`}\n    >\n      <line x2={innerWidth} />\n      <text\n        key={tickValue}\n        style={{ textAnchor: 'end' }}\n        x={-tickOffset}\n        dy=\".32em\"\n      >\n        {tickValue}\n      </text>\n    </g>\n  ));\n","export const Marks = ({\n  data,\n  xScale,\n  yScale,\n  colorScale,\n  xValue,\n  yValue,\n  colorValue,\n  circleRadius\n}) =>\n  data.map(d => (\n    <circle\n      className=\"mark\"\n      cx={xScale(xValue(d))}\n      cy={yScale(yValue(d))}\n      fill={colorScale(colorValue(d))}\n     \tr={circleRadius}\n    />\n  ));\n","export const ColorLegend = ({\n  colorScale,\n  tickSpacing = 30,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity,\n}) =>\n  colorScale.domain().map((domainValue, i) => (\n    <g\n      className=\"tick\"\n      transform={`translate(0,${i * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseOut={() => onHover(null)}\n      opacity={\n        hoveredValue && domainValue !== hoveredValue\n          ? fadeOpacity\n          : 1.0\n      }\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize} />\n      <text x={tickTextOffset} dy=\".32em\">\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n  extent,\n} from 'd3';\nimport ReactDropdown from 'react-dropdown';\n// import { Dropdown } from './Dropdown';\nimport { useData } from './useData';\nimport { AxisBottom } from './AxisBottom';\nimport { AxisLeft } from './AxisLeft';\nimport { Marks } from './Marks';\nimport { ColorLegend } from './ColorLegend';\n\nconst width = 960;\nconst menuHeight = 80;\nconst height = 500 - menuHeight;\nconst margin = {\n  top: 20,\n  right: 200,\n  bottom: 80,\n  left: 100,\n};\nconst xAxisOffset = 60;\nconst yAxisOffset = 50;\n\nconst tickOffset = 16;\n\nconst fadeOpacity = 0.2;\n\nconst attributes = [\n  { value: 'sepal_length', label: 'Sepal Length' },\n  { value: 'sepal_width', label: 'Sepal Width' },\n  { value: 'petal_length', label: 'Patal Length' },\n  { value: 'petal_width', label: 'Patal Width' },\n];\n\nconst getLabel = (attribute) => {\n  for (let i = 0; i < attributes.length; i++) {\n    if (attributes[i].value === attribute) {\n      return attributes[i].label;\n    }\n  }\n};\n\nconst App = () => {\n  const data = useData();\n\n  const initialXAttribute = 'petal_length';\n  const [xAttribute, setXAttribute] = useState(\n    initialXAttribute\n  );\n  const xValue = (d) => d[xAttribute];\n  const xAxisLabel = getLabel(xAttribute);\n\n  const initialYAttribute = 'sepal_width';\n  const [yAttribute, setYAttribute] = useState(\n    initialYAttribute\n  );\n  const yValue = (d) => d[yAttribute];\n  const yAxisLabel = getLabel(yAttribute);\n\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const colorValue = (d) => d.species;\n  const colorLegendLabel = 'Species';\n\n  const circleRadius = 7;\n\n  if (!data) {\n    return <pre>Loading....</pre>;\n  }\n  const filteredData = data.filter(\n    (d) => colorValue(d) === hoveredValue\n  );\n\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.right - margin.left;\n\n  const xScale = scaleLinear()\n    .domain(extent(data, xValue))\n    .range([0, innerWidth])\n    .nice();\n\n  const yScale = scaleLinear()\n    .domain(extent(data, yValue))\n    .range([0, innerHeight]);\n\n  const colorScale = scaleOrdinal()\n    .domain(data.map(colorValue))\n    .range(['#e6842a', '#137b80', '#8e6c8a']);\n\n  return (\n    <>\n      <div className=\"menus-container\">\n        <span className=\"dropdown-label\">X</span>\n        <ReactDropdown\n          options={attributes}\n          value={xAttribute}\n          onChange={({ value }) => setXAttribute(value)}\n        />\n        <span className=\"dropdown-label\">Y</span>\n        <ReactDropdown\n          options={attributes}\n          value={yAttribute}\n          onChange={({ value }) => setYAttribute(value)}\n        />\n      </div>\n      <svg width={width} height={height}>\n        <g\n          transform={`translate(${margin.left},${margin.top})`}\n        >\n          <AxisBottom\n            xScale={xScale}\n            innerHeight={innerHeight}\n            tickOffset={tickOffset}\n          />\n          <text\n            className=\"axis-label\"\n            x={innerWidth / 2}\n            y={innerHeight + xAxisOffset}\n            textAnchor=\"middle\"\n          >\n            {xAxisLabel}\n          </text>\n          <AxisLeft\n            yScale={yScale}\n            innerWidth={innerWidth}\n            tickOffset={tickOffset}\n          />\n          <text\n            className=\"axis-label\"\n            textAnchor=\"middle\"\n            transform={`translate(${-yAxisOffset},${\n              innerHeight / 2\n            }) rotate(-90)`}\n          >\n            {yAxisLabel}\n          </text>\n          <g transform={`translate(${innerWidth + 50},60)`}>\n            <text\n              x={50}\n              y={-30}\n              className=\"axis-label\"\n              textAnchor=\"middle\"\n            >\n              {colorLegendLabel}\n            </text>\n            <ColorLegend\n              colorScale={colorScale}\n              tickSpacing={30}\n              tickSize={circleRadius}\n              tickTextOffset={20}\n              onHover={setHoveredValue}\n              hoveredValue={hoveredValue}\n              fadeOpacity={fadeOpacity}\n            />\n          </g>\n          <g opacity={hoveredValue ? fadeOpacity : 1.0}>\n            <Marks\n              data={data}\n              xScale={xScale}\n              yScale={yScale}\n              colorScale={colorScale}\n              xValue={xValue}\n              yValue={yValue}\n              colorValue={colorValue}\n              circleRadius={circleRadius}\n            />\n          </g>\n          <Marks\n            data={filteredData}\n            xScale={xScale}\n            yScale={yScale}\n            colorScale={colorScale}\n            xValue={xValue}\n            yValue={yValue}\n            colorValue={colorValue}\n            circleRadius={circleRadius}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App />, rootElement);\n"],"names":["const","useState","useEffect","csv","let","React","scaleLinear","extent","scaleOrdinal","ReactDropdown","ReactDOM"],"mappings":"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"}